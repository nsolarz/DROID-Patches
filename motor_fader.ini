[p2b8]
[p2b8]
[b32]
[b32]
[p2b8]
[m4]
[m4]
[m4]
[m4]

# -------------------------------------------------
# Config
# -------------------------------------------------

[droid]
    ledbrightness = 0.5
    m4notchpower = 0

[midithrough]
    tousb = 0

# -------------------------------------------------
# Hardware Mapping
# -------------------------------------------------

[copy]
    input = B5.2
    output = _MOTO_GATES

[copy]
    input = B5.4
    output = _MOTO_START_END

[copy]
    input = B5.6
    output = _MOTO_GATE_PATTERN

[copy]
    input = B5.8
    output = _MOTO_SKIP

[copy]
    output = L5.2
    input = _MOTO_GATES_LED

[copy]
    output = L5.4
    input = _MOTO_START_END_LED

[copy]
    output = L5.6
    input = _MOTO_GATE_PATTERN_LED

[copy]
    output = L5.8
    input = _MOTO_SKIP_LED

[copy]
    input = B5.1
    output = _MOTO_P1

[copy]
    input = B5.3
    output = _MOTO_P2

[copy]
    input = _CV_1_MIX_OUT
    output = O1

[copy]
    input = _GROUP_1_GATE
    output = G1

[copy]
    input = _CV_2_MIX_OUT
    output = O2

[copy]
    input = _GROUP_2_GATE
    output = G2

[copy]
    input = _CV_3_MIX_OUT
    output = O3

[copy]
    input = _GROUP_3_GATE
    output = G3

[copy]
    input = _CV_4_MIX_OUT
    output = O4

[copy]
    input = _GROUP_4_GATE
    output = G4

[copy]
    output = O8
    input = _SINF_CHOICE

[copy]
    output = G8
    input = _ARP_GATE

# -------------------------------------------------
# Selection Constants
# -------------------------------------------------


[copy]
    input = 1
    output = _SEQUENCER_MATRIX

[copy]
    input = 2
    output = _SEQUENCER_GROUP_1

[copy]
    input = 3
    output = _SEQUENCER_GROUP_2

[copy]
    input = 4
    output = _SEQUENCER_GROUP_3

[copy]
    input = 5
    output = _SEQUENCER_GROUP_4

[copy]
    input = 6
    output = _CHORD_ARP

[copy]
    input = 7
    output = _MATRIX

# -------------------------------------------------
# Universal controls
# -------------------------------------------------

[burst]
    count = 3
    output = R31
    trigger = _LOAD_LED_TRIGGER
    rate = 0.3

[logic]
    input1 = _GLOBAL_LOAD_BUTTON
    input2 = _GROUP_1_MOTO_A_LOAD
    input3 = _GROUP_2_MOTO_A_LOAD
    input4 = _GROUP_3_MOTO_A_LOAD
    input5 = _GROUP_4_MOTO_A_LOAD
    or = _LOAD_LED_TRIGGER

[burst]
    count = 3
    output = R32
    trigger = _SAVE_LED_TRIGGER
    rate = 0.2

[logic]
    input1 = _GLOBAL_SAVE_BUTTON
    input2 = _GROUP_1_MOTO_A_SAVE
    input3 = _GROUP_2_MOTO_A_SAVE
    input4 = _GROUP_3_MOTO_A_SAVE
    input5 = _GROUP_4_MOTO_A_SAVE
    or = _SAVE_LED_TRIGGER

[triggerdelay]
    input = _GLOBAL_LOAD_BUTTON
    delay = 0.1
    output = _GLOBAL_LOAD_DELAY

[buttongroup]
    button1 = B1.1
    button2 = B1.2
    button3 = B2.1
    button4 = B2.2
    button5 = B1.3
    button6 = B1.4
    button7 = B2.3
    button8 = B2.4
    button9 = B1.5
    button10 = B1.6
    button11 = B2.5
    button12 = B2.6
    button13 = B1.7
    button14 = B1.8
    button15 = B2.7
    button16 = B2.8
    led1 = L1.1
    led2 = L1.2
    led3 = L2.1
    led4 = L2.2
    led5 = L1.3
    led6 = L1.4
    led7 = L2.3
    led8 = L2.4
    led9 = L1.5
    led10 = L1.6
    led11 = L2.5
    led12 = L2.6
    led13 = L1.7
    led14 = L1.8
    led15 = L2.7
    led16 = L2.8
    buttonpress = _GLOBAL_LOAD_BUTTON
    longpress = _GLOBAL_SAVE_BUTTON
    output = _GLOBAL_PRESET_SELECT

[buttongroup]
    output = _SEQUENCER_SELECT_BUTTON
    button1 = B3.1
    button2 = B3.2
    button3 = B3.3
    button4 = B3.4
    button5 = B4.1
    button6 = B4.2
    button7 = B4.3
    button8 = B4.4
    led1 = L3.1
    led2 = L3.2
    led3 = L3.3
    led4 = L3.4
    led5 = L4.1
    led6 = L4.2
    led7 = L4.3
    led8 = L4.4

[buttongroup]
    button1 = _MOTO_GATES
    button2 = _MOTO_START_END
    button3 = _MOTO_GATE_PATTERN
    button4 = _MOTO_SKIP
    led1 = _MOTO_GATES_LED
    led2 = _MOTO_START_END_LED
    led3 = _MOTO_GATE_PATTERN_LED
    led4 = _MOTO_SKIP_LED
    output = _BUTTONMODE

[switch]
    input1 = _SEQUENCER_MATRIX
    input2 = _SEQUENCER_GROUP_1
    input3 = _SEQUENCER_GROUP_2
    input4 = _SEQUENCER_GROUP_3
    input5 = _SEQUENCER_GROUP_4
    input6 = _CHORD_ARP
    input7 = _MATRIX
    input8 = 99
    offset = _SEQUENCER_SELECT_BUTTON
    output1 = _SEQUENCER_GROUP_SELECT

[compare]
    input = _SEQUENCER_GROUP_SELECT
    compare = _SEQUENCER_GROUP_1
    output = _GROUP_1_ACTIVE

[compare]
    input = _SEQUENCER_GROUP_SELECT
    compare = _SEQUENCER_GROUP_2
    output = _GROUP_2_ACTIVE

[compare]
    input = _SEQUENCER_GROUP_SELECT
    compare = _SEQUENCER_GROUP_3
    output = _GROUP_3_ACTIVE

[compare]
    input = _SEQUENCER_GROUP_SELECT
    compare = _SEQUENCER_GROUP_4
    output = _GROUP_4_ACTIVE

[switch]
    input1 = 0
    input2 = 1
    input3 = 1
    input4 = 1
    input5 = 1
    input6 = 0
    input7 = 0
    input8 = 0
    offset = _SEQUENCER_SELECT_BUTTON
    output1 = _SHOW_MOTOQUENCER_PAGE_SELECT_BUTTONS

[buttongroup]
    select = _SHOW_MOTOQUENCER_PAGE_SELECT_BUTTONS
    output = _PAGE_SELECT
    button1 = B3.5
    button2 = B3.6
    button3 = B3.7
    button4 = B3.8
    button5 = B4.5
    button6 = B4.6
    button7 = B4.7
    button8 = B4.8
    led1 = L3.5
    led2 = L3.6
    led3 = L3.7
    led4 = L3.8
    led5 = L4.5
    led6 = L4.6
    led7 = L4.7
    led8 = L4.8

[button]
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    led = L3.23
    output = _GROUP_1_ENABLE
    button = B3.23

[button]
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    led = L3.24
    output = _GROUP_2_ENABLE
    button = B3.24

[button]
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    led = L4.21
    output = _GROUP_3_ENABLE
    button = B4.21

[button]
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    led = L4.22
    output = _GROUP_4_ENABLE
    button = B4.22

[button]
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    led = L4.23
    output = _CHORD_ENABLE
    button = B4.23

[button]
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    led = L4.24
    output = _ARP_ENABLE
    button = B4.24

[button]
    button = B5.7
    longpress = _CLEAR

[button]
    button = B5.5
    output = _FOLLOW_ON
    inverted = _FOLLOW_OFF
    led = L5.5

[mixer]
    input1 = _GROUP_1_P1_LED * _GROUP_1_ACTIVE
    input2 = _GROUP_2_P1_LED * _GROUP_2_ACTIVE
    input3 = _GROUP_3_P1_LED * _GROUP_3_ACTIVE
    input4 = _GROUP_4_P1_LED * _GROUP_4_ACTIVE
    maximum = L5.1

[mixer]
    input1 = _GROUP_1_P2_LED * _GROUP_1_ACTIVE
    input2 = _GROUP_2_P2_LED * _GROUP_2_ACTIVE
    input3 = _GROUP_3_P2_LED * _GROUP_3_ACTIVE
    input4 = _GROUP_4_P2_LED * _GROUP_4_ACTIVE
    maximum = L5.3

# -------------------------------------------------
# Clock
# -------------------------------------------------

[midiin]
    clock16 = _CLOCK16 # 16th note
    stop = _STOP
    clock4 = _CLOCK4 # Quarter note
    clock8 = _CLOCK8 # 8th note

[clocktool]
    reset = _STOP
    output = _CLOCK1BAR # 1 Bar
    gatelength = 0.5
    divide = 4
    clock = _CLOCK4

[clocktool]
    reset = _STOP
    output = _CLOCK2 # half note
    gatelength = 0.5
    divide = 2
    clock = _CLOCK4


# -------------------------------------------------
# Sequencer Matrix
# -------------------------------------------------

[matrixmixer]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_MATRIX
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    input1 = _GROUP_1_CV
    input2 = _GROUP_2_CV
    input3 = _GROUP_3_CV
    input4 = _GROUP_4_CV
    startvalue = 1
    reset = _CLEAR
    button11 = B3.5
    button12 = B3.6
    button13 = B3.7
    button14 = B3.8
    button21 = B3.9
    button22 = B3.10
    button23 = B3.11
    button24 = B3.12
    button31 = B3.13
    button32 = B3.14
    button33 = B3.15
    button34 = B3.16
    button41 = B3.17
    button42 = B3.18
    button43 = B3.19
    button44 = B3.20
    output1 = _CV_1_MIX_OUT
    output2 = _CV_2_MIX_OUT
    output3 = _CV_3_MIX_OUT
    output4 = _CV_4_MIX_OUT
    led11 = L3.5
    led12 = L3.6
    led13 = L3.7
    led14 = L3.8
    led21 = L3.9
    led22 = L3.10
    led23 = L3.11
    led24 = L3.12
    led31 = L3.13
    led32 = L3.14
    led33 = L3.15
    led34 = L3.16
    led41 = L3.17
    led42 = L3.18
    led43 = L3.19
    led44 = L3.20

# -------------------------------------------------
# Sinfonion
# -------------------------------------------------

[button]
    output = _CHORDSTEPS_LOOPSWITCH_BTN
    inverted = _NOTE_MODE
    button = B3.21
    led = L3.21

[button]
    output = _CHORDSTEPS_BYPASS
    button = B3.22
    led = L3.22

[cvlooper]
    bypass = _CHORDSTEPS_BYPASS
    length = 128
    tapespeed = 0.5
    reset = _STOP
    clock = _CLOCK16
    cvout = _SINF_CHOICE
    cvin = _SINF_NOTE
    loopswitch = _CHORDSTEPS_LOOPSWITCH_BTN

[compare]
    input = _CHRD_CMPR * 120
    compare = 0
    output = _CHRD_1
    precision = 0.2

[compare]
    input = _CHRD_CMPR * 120
    compare = 1
    output = _CHRD_2
    precision = 0.2

[compare]
    input = _CHRD_CMPR * 120
    compare = 2
    output = _CHRD_3
    precision = 0.2

[compare]
    input = _CHRD_CMPR * 120
    compare = 3
    output = _CHRD_4
    precision = 0.2

[compare]
    input = _CHRD_CMPR * 120
    compare = 4
    output = _CHRD_5
    precision = 0.2

[compare]
    input = _CHRD_CMPR * 120
    compare = 5
    output = _CHRD_6
    precision = 0.2

[compare]
    input = _CHRD_CMPR * 120
    compare = 6
    output = _CHRD_7
    precision = 0.2

[compare]
    input = _CHRD_CMPR * 120
    compare = 7
    output = _CHRD_8
    precision = 0.2

[compare]
    input = _CHRD_CMPR * 120
    compare = 8
    output = _CHRD_9
    precision = 0.2

[compare]
    input = _CHRD_CMPR * 120
    compare = 9
    output = _CHRD_10
    precision = 0.2

[compare]
    input = _CHRD_CMPR * 120
    compare = 10
    output = _CHRD_11
    precision = 0.2

[compare]
    input = _CHRD_CMPR * 120
    compare = 11
    output = _CHRD_12
    precision = 0.2

[copy]
    input = _SINF_CHOICE
    output = _CHRD_CMPR

[mixer]
    input1 = 0.3
    input2 = _CHRD_1
    input3 = _SINF_LED_1
    maximum = L3.29

[mixer]
    input1 = 0.3
    input2 = _CHRD_2
    input3 = _SINF_LED_2
    maximum = L3.30

[mixer]
    input1 = 0.3
    input2 = _CHRD_3
    input3 = _SINF_LED_3
    maximum = L3.31

[mixer]
    input1 = 0.3
    input2 = _CHRD_4
    input3 = _SINF_LED_4
    maximum = L3.32

[mixer]
    input1 = 0.3
    input2 = _CHRD_5
    input3 = _SINF_LED_5
    maximum = L4.29

[mixer]
    input1 = 0.3
    input2 = _CHRD_6
    input3 = _SINF_LED_6
    maximum = L4.30

[mixer]
    input1 = 0.3
    input2 = _CHRD_7
    input3 = _SINF_LED_7
    maximum = L4.31

[mixer]
    input1 = 0.3
    input2 = _CHRD_8
    input3 = _SINF_LED_8
    maximum = L4.32

[mixer]
    input1 = 0.3
    input2 = _CHRD_9
    input3 = _SINF_LED_9
    maximum = L3.27

[mixer]
    input1 = 0.3
    input2 = _CHRD_10
    input3 = _SINF_LED_10
    maximum = L3.28

[mixer]
    input1 = 0.3
    input2 = _CHRD_11
    input3 = _SINF_LED_11
    maximum = L4.25

[mixer]
    input1 = 0.3
    input2 = _CHRD_12
    input3 = _SINF_LED_12
    maximum = L4.26

[notebuttons]
    select = _NOTE_MODE
    button1 = B3.29
    button2 = B3.30
    button3 = B3.31
    button4 = B3.32
    button5 = B4.29
    button6 = B4.30
    button7 = B4.31
    button8 = B4.32
    button9 = B3.27
    button10 = B3.28
    button11 = B4.25
    button12 = B4.26
    led1 = _SINF_LED_1
    led2 = _SINF_LED_2
    led3 = _SINF_LED_3
    led4 = _SINF_LED_4
    led5 = _SINF_LED_5
    led6 = _SINF_LED_6
    led7 = _SINF_LED_7
    led8 = _SINF_LED_8
    led9 = _SINF_LED_9
    led10 = _SINF_LED_10
    led11 = _SINF_LED_11
    led12 = _SINF_LED_12
    semitone = _SINF_NOTE
    clock = _CLOCK16

# -------------------------------------------------
# Alyseum Matrix
# -------------------------------------------------

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _MATRIX
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.5
    button2 = B3.6
    button3 = B3.7
    button4 = B3.8
    button5 = B4.5
    button6 = B4.6
    button7 = B4.7
    button8 = B4.8
    button9 = B3.9
    button10 = B3.10
    button11 = B3.11
    button12 = B3.12
    button13 = B4.9
    button14 = B4.10
    button15 = B4.11
    button16 = B4.12
    led1 = L3.5
    led2 = L3.6
    led3 = L3.7
    led4 = L3.8
    led5 = L4.5
    led6 = L4.6
    led7 = L4.7
    led8 = L4.8
    led9 = L3.9
    led10 = L3.10
    led11 = L3.11
    led12 = L3.12
    led13 = L4.9
    led14 = L4.10
    led15 = L4.11
    led16 = L4.12
    output = _MATRIX_A_PRESET

[midiout]
    programchange = _CLOCK1BAR
    program = _MATRIX_A_PRESET + 1
    channel = 4

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _MATRIX
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.13
    button2 = B3.14
    button3 = B3.15
    button4 = B3.16
    button5 = B4.13
    button6 = B4.14
    button7 = B4.15
    button8 = B4.16
    button9 = B3.17
    button10 = B3.18
    button11 = B3.19
    button12 = B3.20
    button13 = B4.17
    button14 = B4.18
    button15 = B4.19
    button16 = B4.20
    led1 = L3.13
    led2 = L3.14
    led3 = L3.15
    led4 = L3.16
    led5 = L4.13
    led6 = L4.14
    led7 = L4.15
    led8 = L4.16
    led9 = L3.17
    led10 = L3.18
    led11 = L3.19
    led12 = L3.20
    led13 = L4.17
    led14 = L4.18
    led15 = L4.19
    led16 = L4.20
    output = _MATRIX_B_PRESET

[midiout]
    programchange = _CLOCK1BAR
    program = _MATRIX_B_PRESET + 1
    channel = 5

# -------------------------------------------------
# Chord/Arp
# -------------------------------------------------

[math]
    input1 = _GATESPREAD * 0.5
    input2 = 1
    product = _NOTE2DELAY

[math]
    input1 = _GATESPREAD * 0.5
    input2 = 2
    product = _NOTE3DELAY

[math]
    input1 = _GATESPREAD * 0.5
    input2 = 3
    product = _NOTE4DELAY

[switch]
    input1 = 0
    input2 = _NOTE2DELAY
    input3 = _NOTE3DELAY
    input4 = _NOTE4DELAY
    forward = _NOTEGATE
    reset = _STOP
    output1 = _NOTE1DELAYSWITCH
    output2 = _NOTE2DELAYSWITCH
    output3 = _NOTE3DELAYSWITCH
    output4 = _NOTE4DELAYSWITCH

[triggerdelay]
    input = _NOTEGATE
    delay = _NOTE1DELAYSWITCH
    gatelength = _GATESPREAD * 0.5 + 0.2
    output = _NOTE1GATE

[triggerdelay]
    input = _NOTEGATE
    delay = _NOTE2DELAYSWITCH
    gatelength = _GATESPREAD * 0.5 + 0.2
    output = _NOTE2GATE

[triggerdelay]
    input = _NOTEGATE
    delay = _NOTE3DELAYSWITCH
    gatelength = _GATESPREAD * 0.5 + 0.2
    output = _NOTE3GATE

[triggerdelay]
    input = _NOTEGATE
    delay = _NOTE4DELAYSWITCH
    gatelength = _GATESPREAD * 0.5 + 0.2
    output = _NOTE4GATE

[algoquencer]
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    select = _SEQUENCER_GROUP_SELECT
    selectat = _CHORD_ARP
    button1 = B3.5
    button2 = B3.6
    button3 = B3.7
    button4 = B3.8
    button5 = B4.5
    button6 = B4.6
    button7 = B4.7
    button8 = B4.8
    button9 = B3.9
    button10 = B3.10
    button11 = B3.11
    button12 = B3.12
    button13 = B4.9
    button14 = B4.10
    button15 = B4.11
    button16 = B4.12
    led1 = L3.5
    led2 = L3.6
    led3 = L3.7
    led4 = L3.8
    led5 = L4.5
    led6 = L4.6
    led7 = L4.7
    led8 = L4.8
    led9 = L3.9
    led10 = L3.10
    led11 = L3.11
    led12 = L3.12
    led13 = L4.9
    led14 = L4.10
    led15 = L4.11
    led16 = L4.12
    clock = _CLOCK8
    gatelength = 0.5
    length = 16
    reset = _STOP
    gate = _CHORD_ALGO_GATE

[logic]
    input1 = _CHORD_ENABLE
    input2 = _CHORD_ALGO_GATE
    and = _NOTEGATE

[logic]
    input1 = _ARP_ENABLE
    input2 = _ARP_ALGO_GATE
    and = _ARP_GATE

[algoquencer]
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    select = _SEQUENCER_GROUP_SELECT
    selectat = _CHORD_ARP
    button1 = B3.13
    button2 = B3.14
    button3 = B3.15
    button4 = B3.16
    button5 = B4.13
    button6 = B4.14
    button7 = B4.15
    button8 = B4.16
    button9 = B3.17
    button10 = B3.18
    button11 = B3.19
    button12 = B3.20
    button13 = B4.17
    button14 = B4.18
    button15 = B4.19
    button16 = B4.20
    led1 = L3.13
    led2 = L3.14
    led3 = L3.15
    led4 = L3.16
    led5 = L4.13
    led6 = L4.14
    led7 = L4.15
    led8 = L4.16
    led9 = L3.17
    led10 = L3.18
    led11 = L3.19
    led12 = L3.20
    led13 = L4.17
    led14 = L4.18
    led15 = L4.19
    led16 = L4.20
    clock = _CLOCK16
    gatelength = 0.5
    length = 16
    reset = _STOP
    gate = _ARP_ALGO_GATE

[pot]
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    output = _GATESPREAD
    select = _SEQUENCER_GROUP_SELECT
    selectat = _CHORD_ARP
    pot = P1.1

[midiout]
    channel = 16
    velocity1 = 0.7
    velocity2 = 0.7
    velocity3 = 0.7
    velocity4 = 0.7
    pitch1 = I1
    pitch2 = I2
    gate1 = _NOTE1GATE
    gate2 = _NOTE2GATE
    gate3 = _NOTE3GATE
    gate4 = _NOTE4GATE
    pitch3 = I3
    pitch4 = I4

# -------------------------------------------------
# Sequencer 1
# -------------------------------------------------

## Page follow 
[compare]
    input = _GROUP_1_MOTO_A_PAGE
    compare = 0 # Page 1
    output = _GROUP_1_P1_FOLLOW

[compare]
    input = _GROUP_1_MOTO_A_PAGE
    compare = 1 # Page 2
    output = _GROUP_1_P2_FOLLOW

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT * _FOLLOW_OFF
    selectat = _SEQUENCER_GROUP_1
    button1 = _MOTO_P1
    button2 = _MOTO_P2
    led1 = _GROUP_1_P1_BUTTON
    led2 = _GROUP_1_P2_BUTTON
    output = _GROUP_1_PAGE_BUTTON

[switch]
    input1 = _GROUP_1_PAGE_BUTTON
    input2 = _GROUP_1_MOTO_A_PAGE
    output1 = _GROUP_1_SHOW_PAGE
    offset = _FOLLOW_ON

[mixer]
    input1 = 0.1
    input2 = _GROUP_1_P1_BUTTON * _FOLLOW_OFF
    input3 = _GROUP_1_P1_FOLLOW * _FOLLOW_ON
    maximum = _GROUP_1_P1_LED

[mixer]
    input1 = 0.1
    input2 = _GROUP_1_P2_BUTTON * _FOLLOW_OFF
    input3 = _GROUP_1_P2_FOLLOW * _FOLLOW_ON
    maximum = _GROUP_1_P2_LED

## Controls

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_1
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.9
    button2 = B3.10
    button3 = B3.11
    button4 = B3.12
    led1 = L3.9
    led2 = L3.10
    led3 = L3.11
    led4 = L3.12
    output = _GROUP_1_MOTO_A_PRESET
    buttonpress = _GROUP_1_MOTO_A_LOAD
    longpress = _GROUP_1_MOTO_A_SAVE

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_1
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B4.9
    button2 = B4.10
    button3 = B4.11
    button4 = B4.12
    led1 = L4.9
    led2 = L4.10
    led3 = L4.11
    led4 = L4.12
    output = _GROUP_1_CLOCKDIV

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_1
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.13
    button2 = B3.14
    button3 = B3.15
    button4 = B3.16
    led1 = L3.13
    led2 = L3.14
    led3 = L3.15
    led4 = L3.16
    value1 = 0.0
    value2 = 0.1
    value3 = 0.2
    value4 = 0.3
    output = _GROUP_1_CV_BASE

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_1
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B4.13
    button2 = B4.14
    button3 = B4.15
    button4 = B4.16
    led1 = L4.13
    led2 = L4.14
    led3 = L4.15
    led4 = L4.16
    value1 = 0 # Off
    value2 = 1 # AAAB
    value3 = 3 # ABAC
    value4 = 4 # AAABAAAC
    output = _GROUP_1_FORM

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_1
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.17
    button2 = B3.18
    button3 = B3.19
    button4 = B3.20
    led1 = L3.17
    led2 = L3.18
    led3 = L3.19
    led4 = L3.20
    value1 = 0.1
    value2 = 0.2
    value3 = 0.3
    value4 = 0.4
    output = _GROUP_1_CV_RANGE

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_1
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B4.17
    button2 = B4.18
    button3 = B4.19
    button4 = B4.20
    led1 = L4.17
    led2 = L4.18
    led3 = L4.19
    led4 = L4.20
    value1 = 0 # Off
    value2 = 1 # two steps forward, one step backward
    value3 = 2 # double step forward, one step backward
    value4 = 7 # Random
    output = _GROUP_1_PATTERN

[sample]
    input = _GROUP_1_CLOCKDIV
    sample = _CLOCK1BAR
    output = _GROUP_1_CLOCKDIV_SAMPLED

[switch]
    input1 = _CLOCK16
    input2 = _CLOCK8
    input3 = _CLOCK4
    input4 = _CLOCK2
    offset = _GROUP_1_CLOCKDIV_SAMPLED
    output1 = _GROUP_1_CLOCK

[copy]
    input = _GROUP_1_MOTO_A_CV
    output = _GROUP_1_CV

[copy]
    input = _GROUP_1_MOTO_A_GATE
    output = _GROUP_1_INTERNAL_GATE

[logic]
    input1 = _GROUP_1_INTERNAL_GATE
    input2 = _GROUP_1_ENABLE
    and = _GROUP_1_GATE

[logic]
    input1 = _GROUP_1_MOTO_A_LOAD
    input2 = _GLOBAL_LOAD_DELAY
    or = _GROUP_1_MOTO_A_LOAD_GLOBAL

[compare]
    input = _SEQUENCER_GROUP_SELECT
    compare = _SEQUENCER_GROUP_1
    ifequal = 1
    else = 0
    output = _GROUP_1_MOTO_A_ACTIVE

# #### Moto A
[motoquencer]
    clock = _GROUP_1_CLOCK
    reset = _STOP
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_1
    fadermode = _PAGE_SELECT
    buttonmode = _BUTTONMODE
    copymode = 1 # only the current page
    startstep = 1
    endstep = 16 # default to 16 step sequence after a clear
    defaultgate = 0 # No gates after a clear
    cvbase = _GROUP_1_CV_BASE
    cvrange = _GROUP_1_CV_RANGE
    form = _GROUP_1_FORM
    pattern = _GROUP_1_PATTERN
    savepreset = _GROUP_1_MOTO_A_SAVE
    loadpreset = _GROUP_1_MOTO_A_LOAD_GLOBAL
    preset = _GROUP_1_MOTO_A_PRESET
    numfaders = 16
    numsteps = 32
    cv = _GROUP_1_MOTO_A_CV
    gate = _GROUP_1_MOTO_A_GATE
    clear = _CLEAR * _GROUP_1_MOTO_A_ACTIVE
    page = _GROUP_1_SHOW_PAGE
    currentpage = _GROUP_1_MOTO_A_PAGE

# -------------------------------------------------
# Sequencer 2
# -------------------------------------------------

## Page follow 
[compare]
    input = _GROUP_2_MOTO_A_PAGE
    compare = 0 # Page 1
    output = _GROUP_2_P1_FOLLOW

[compare]
    input = _GROUP_2_MOTO_A_PAGE
    compare = 1 # Page 2
    output = _GROUP_2_P2_FOLLOW

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT * _FOLLOW_OFF
    selectat = _SEQUENCER_GROUP_2
    button1 = _MOTO_P1
    button2 = _MOTO_P2
    led1 = _GROUP_2_P1_BUTTON
    led2 = _GROUP_2_P2_BUTTON
    output = _GROUP_2_PAGE_BUTTON

[switch]
    input1 = _GROUP_2_PAGE_BUTTON
    input2 = _GROUP_2_MOTO_A_PAGE
    output1 = _GROUP_2_SHOW_PAGE
    offset = _FOLLOW_ON

[mixer]
    input1 = 0.1
    input2 = _GROUP_2_P1_BUTTON * _FOLLOW_OFF
    input3 = _GROUP_2_P1_FOLLOW * _FOLLOW_ON
    maximum = _GROUP_2_P1_LED

[mixer]
    input1 = 0.1
    input2 = _GROUP_2_P2_BUTTON * _FOLLOW_OFF
    input3 = _GROUP_2_P2_FOLLOW * _FOLLOW_ON
    maximum = _GROUP_2_P2_LED

## Controls

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_2
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.9
    button2 = B3.10
    button3 = B3.11
    button4 = B3.12
    led1 = L3.9
    led2 = L3.10
    led3 = L3.11
    led4 = L3.12
    output = _GROUP_2_MOTO_A_PRESET
    buttonpress = _GROUP_2_MOTO_A_LOAD
    longpress = _GROUP_2_MOTO_A_SAVE

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_2
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B4.9
    button2 = B4.10
    button3 = B4.11
    button4 = B4.12
    led1 = L4.9
    led2 = L4.10
    led3 = L4.11
    led4 = L4.12
    output = _GROUP_2_CLOCKDIV

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_2
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.13
    button2 = B3.14
    button3 = B3.15
    button4 = B3.16
    led1 = L3.13
    led2 = L3.14
    led3 = L3.15
    led4 = L3.16
    value1 = 0.0
    value2 = 0.1
    value3 = 0.2
    value4 = 0.3
    output = _GROUP_2_CV_BASE

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_2
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B4.13
    button2 = B4.14
    button3 = B4.15
    button4 = B4.16
    led1 = L4.13
    led2 = L4.14
    led3 = L4.15
    led4 = L4.16
    value1 = 0 # Off
    value2 = 1 # AAAB
    value3 = 3 # ABAC
    value4 = 4 # AAABAAAC
    output = _GROUP_2_FORM

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_2
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.17
    button2 = B3.18
    button3 = B3.19
    button4 = B3.20
    led1 = L3.17
    led2 = L3.18
    led3 = L3.19
    led4 = L3.20
    value1 = 0.1
    value2 = 0.2
    value3 = 0.3
    value4 = 0.4
    output = _GROUP_2_CV_RANGE

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_2
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B4.17
    button2 = B4.18
    button3 = B4.19
    button4 = B4.20
    led1 = L4.17
    led2 = L4.18
    led3 = L4.19
    led4 = L4.20
    value1 = 0 # Off
    value2 = 1 # two steps forward, one step backward
    value3 = 2 # double step forward, one step backward
    value4 = 7 # Random
    output = _GROUP_2_PATTERN

[sample]
    input = _GROUP_2_CLOCKDIV
    sample = _CLOCK1BAR
    output = _GROUP_2_CLOCKDIV_SAMPLED

[switch]
    input1 = _CLOCK16
    input2 = _CLOCK8
    input3 = _CLOCK4
    input4 = _CLOCK2
    offset = _GROUP_2_CLOCKDIV_SAMPLED
    output1 = _GROUP_2_CLOCK

[copy]
    input = _GROUP_2_MOTO_A_CV
    output = _GROUP_2_CV

[copy]
    input = _GROUP_2_MOTO_A_GATE
    output = _GROUP_2_INTERNAL_GATE

[logic]
    input1 = _GROUP_2_INTERNAL_GATE
    input2 = _GROUP_2_ENABLE
    and = _GROUP_2_GATE

[logic]
    input1 = _GROUP_2_MOTO_A_LOAD
    input2 = _GLOBAL_LOAD_DELAY
    or = _GROUP_2_MOTO_A_LOAD_GLOBAL

[compare]
    input = _SEQUENCER_GROUP_SELECT
    compare = _SEQUENCER_GROUP_2
    ifequal = 1
    else = 0
    output = _GROUP_2_MOTO_A_ACTIVE

# #### Moto A
[motoquencer]
    clock = _GROUP_2_CLOCK
    reset = _STOP
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_2
    fadermode = _PAGE_SELECT
    buttonmode = _BUTTONMODE
    copymode = 1 # only the current page
    startstep = 1
    endstep = 16 # default to 16 step sequence after a clear
    defaultgate = 0 # No gates after a clear
    cvbase = _GROUP_2_CV_BASE
    cvrange = _GROUP_2_CV_RANGE
    form = _GROUP_2_FORM
    pattern = _GROUP_2_PATTERN
    savepreset = _GROUP_2_MOTO_A_SAVE
    loadpreset = _GROUP_2_MOTO_A_LOAD_GLOBAL
    preset = _GROUP_2_MOTO_A_PRESET
    numfaders = 16
    numsteps = 32
    cv = _GROUP_2_MOTO_A_CV
    gate = _GROUP_2_MOTO_A_GATE
    clear = _CLEAR * _GROUP_2_MOTO_A_ACTIVE
    page = _GROUP_2_SHOW_PAGE
    currentpage = _GROUP_2_MOTO_A_PAGE

# -------------------------------------------------
# Sequencer 3
# -------------------------------------------------

## Page follow 
[compare]
    input = _GROUP_3_MOTO_A_PAGE
    compare = 0 # Page 1
    output = _GROUP_3_P1_FOLLOW

[compare]
    input = _GROUP_3_MOTO_A_PAGE
    compare = 1 # Page 2
    output = _GROUP_3_P2_FOLLOW

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT * _FOLLOW_OFF
    selectat = _SEQUENCER_GROUP_3
    button1 = _MOTO_P1
    button2 = _MOTO_P2
    led1 = _GROUP_3_P1_BUTTON
    led2 = _GROUP_3_P2_BUTTON
    output = _GROUP_3_PAGE_BUTTON

[switch]
    input1 = _GROUP_3_PAGE_BUTTON
    input2 = _GROUP_3_MOTO_A_PAGE
    output1 = _GROUP_3_SHOW_PAGE
    offset = _FOLLOW_ON

[mixer]
    input1 = 0.1
    input2 = _GROUP_3_P1_BUTTON * _FOLLOW_OFF
    input3 = _GROUP_3_P1_FOLLOW * _FOLLOW_ON
    maximum = _GROUP_3_P1_LED

[mixer]
    input1 = 0.1
    input2 = _GROUP_3_P2_BUTTON * _FOLLOW_OFF
    input3 = _GROUP_3_P2_FOLLOW * _FOLLOW_ON
    maximum = _GROUP_3_P2_LED

## Controls

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_3
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.9
    button2 = B3.10
    button3 = B3.11
    button4 = B3.12
    led1 = L3.9
    led2 = L3.10
    led3 = L3.11
    led4 = L3.12
    output = _GROUP_3_MOTO_A_PRESET
    buttonpress = _GROUP_3_MOTO_A_LOAD
    longpress = _GROUP_3_MOTO_A_SAVE

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_3
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B4.9
    button2 = B4.10
    button3 = B4.11
    button4 = B4.12
    led1 = L4.9
    led2 = L4.10
    led3 = L4.11
    led4 = L4.12
    output = _GROUP_3_CLOCKDIV

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_3
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.13
    button2 = B3.14
    button3 = B3.15
    button4 = B3.16
    led1 = L3.13
    led2 = L3.14
    led3 = L3.15
    led4 = L3.16
    value1 = 0.0
    value2 = 0.1
    value3 = 0.2
    value4 = 0.3
    output = _GROUP_3_CV_BASE

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_3
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B4.13
    button2 = B4.14
    button3 = B4.15
    button4 = B4.16
    led1 = L4.13
    led2 = L4.14
    led3 = L4.15
    led4 = L4.16
    value1 = 0 # Off
    value2 = 1 # AAAB
    value3 = 3 # ABAC
    value4 = 4 # AAABAAAC
    output = _GROUP_3_FORM

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_3
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.17
    button2 = B3.18
    button3 = B3.19
    button4 = B3.20
    led1 = L3.17
    led2 = L3.18
    led3 = L3.19
    led4 = L3.20
    value1 = 0.1
    value2 = 0.2
    value3 = 0.3
    value4 = 0.4
    output = _GROUP_3_CV_RANGE

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_3
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B4.17
    button2 = B4.18
    button3 = B4.19
    button4 = B4.20
    led1 = L4.17
    led2 = L4.18
    led3 = L4.19
    led4 = L4.20
    value1 = 0 # Off
    value2 = 1 # two steps forward, one step backward
    value3 = 2 # double step forward, one step backward
    value4 = 7 # Random
    output = _GROUP_3_PATTERN

[sample]
    input = _GROUP_3_CLOCKDIV
    sample = _CLOCK1BAR
    output = _GROUP_3_CLOCKDIV_SAMPLED

[switch]
    input1 = _CLOCK16
    input2 = _CLOCK8
    input3 = _CLOCK4
    input4 = _CLOCK2
    offset = _GROUP_3_CLOCKDIV_SAMPLED
    output1 = _GROUP_3_CLOCK

[copy]
    input = _GROUP_3_MOTO_A_CV
    output = _GROUP_3_CV

[copy]
    input = _GROUP_3_MOTO_A_GATE
    output = _GROUP_3_INTERNAL_GATE

[logic]
    input1 = _GROUP_3_INTERNAL_GATE
    input2 = _GROUP_3_ENABLE
    and = _GROUP_3_GATE

[logic]
    input1 = _GROUP_3_MOTO_A_LOAD
    input2 = _GLOBAL_LOAD_DELAY
    or = _GROUP_3_MOTO_A_LOAD_GLOBAL

[compare]
    input = _SEQUENCER_GROUP_SELECT
    compare = _SEQUENCER_GROUP_3
    ifequal = 1
    else = 0
    output = _GROUP_3_MOTO_A_ACTIVE

# #### Moto A
[motoquencer]
    clock = _GROUP_3_CLOCK
    reset = _STOP
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_3
    fadermode = _PAGE_SELECT
    buttonmode = _BUTTONMODE
    copymode = 1 # only the current page
    startstep = 1
    endstep = 16 # default to 16 step sequence after a clear
    defaultgate = 0 # No gates after a clear
    cvbase = _GROUP_3_CV_BASE
    cvrange = _GROUP_3_CV_RANGE
    form = _GROUP_3_FORM
    pattern = _GROUP_3_PATTERN
    savepreset = _GROUP_3_MOTO_A_SAVE
    loadpreset = _GROUP_3_MOTO_A_LOAD_GLOBAL
    preset = _GROUP_3_MOTO_A_PRESET
    numfaders = 16
    numsteps = 32
    cv = _GROUP_3_MOTO_A_CV
    gate = _GROUP_3_MOTO_A_GATE
    clear = _CLEAR * _GROUP_3_MOTO_A_ACTIVE
    page = _GROUP_3_SHOW_PAGE
    currentpage = _GROUP_3_MOTO_A_PAGE

# -------------------------------------------------
# Sequencer 4
# -------------------------------------------------

## Page follow 
[compare]
    input = _GROUP_4_MOTO_A_PAGE
    compare = 0 # Page 1
    output = _GROUP_4_P1_FOLLOW

[compare]
    input = _GROUP_4_MOTO_A_PAGE
    compare = 1 # Page 2
    output = _GROUP_4_P2_FOLLOW

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT * _FOLLOW_OFF
    selectat = _SEQUENCER_GROUP_4
    button1 = _MOTO_P1
    button2 = _MOTO_P2
    led1 = _GROUP_4_P1_BUTTON
    led2 = _GROUP_4_P2_BUTTON
    output = _GROUP_4_PAGE_BUTTON

[switch]
    input1 = _GROUP_4_PAGE_BUTTON
    input2 = _GROUP_4_MOTO_A_PAGE
    output1 = _GROUP_4_SHOW_PAGE
    offset = _FOLLOW_ON

[mixer]
    input1 = 0.1
    input2 = _GROUP_4_P1_BUTTON * _FOLLOW_OFF
    input3 = _GROUP_4_P1_FOLLOW * _FOLLOW_ON
    maximum = _GROUP_4_P1_LED

[mixer]
    input1 = 0.1
    input2 = _GROUP_4_P2_BUTTON * _FOLLOW_OFF
    input3 = _GROUP_4_P2_FOLLOW * _FOLLOW_ON
    maximum = _GROUP_4_P2_LED

## Controls

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_4
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.9
    button2 = B3.10
    button3 = B3.11
    button4 = B3.12
    led1 = L3.9
    led2 = L3.10
    led3 = L3.11
    led4 = L3.12
    output = _GROUP_4_MOTO_A_PRESET
    buttonpress = _GROUP_4_MOTO_A_LOAD
    longpress = _GROUP_4_MOTO_A_SAVE

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_4
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B4.9
    button2 = B4.10
    button3 = B4.11
    button4 = B4.12
    led1 = L4.9
    led2 = L4.10
    led3 = L4.11
    led4 = L4.12
    output = _GROUP_4_CLOCKDIV

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_4
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.13
    button2 = B3.14
    button3 = B3.15
    button4 = B3.16
    led1 = L3.13
    led2 = L3.14
    led3 = L3.15
    led4 = L3.16
    value1 = 0.0
    value2 = 0.1
    value3 = 0.2
    value4 = 0.3
    output = _GROUP_4_CV_BASE

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_4
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B4.13
    button2 = B4.14
    button3 = B4.15
    button4 = B4.16
    led1 = L4.13
    led2 = L4.14
    led3 = L4.15
    led4 = L4.16
    value1 = 0 # Off
    value2 = 1 # AAAB
    value3 = 3 # ABAC
    value4 = 4 # AAABAAAC
    output = _GROUP_4_FORM

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_4
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B3.17
    button2 = B3.18
    button3 = B3.19
    button4 = B3.20
    led1 = L3.17
    led2 = L3.18
    led3 = L3.19
    led4 = L3.20
    value1 = 0.1
    value2 = 0.2
    value3 = 0.3
    value4 = 0.4
    output = _GROUP_4_CV_RANGE

[buttongroup]
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_4
    preset = _GLOBAL_PRESET_SELECT
    savepreset = _GLOBAL_SAVE_BUTTON
    loadpreset = _GLOBAL_LOAD_BUTTON
    button1 = B4.17
    button2 = B4.18
    button3 = B4.19
    button4 = B4.20
    led1 = L4.17
    led2 = L4.18
    led3 = L4.19
    led4 = L4.20
    value1 = 0 # Off
    value2 = 1 # two steps forward, one step backward
    value3 = 2 # double step forward, one step backward
    value4 = 7 # Random
    output = _GROUP_4_PATTERN

[sample]
    input = _GROUP_4_CLOCKDIV
    sample = _CLOCK1BAR
    output = _GROUP_4_CLOCKDIV_SAMPLED

[switch]
    input1 = _CLOCK16
    input2 = _CLOCK8
    input3 = _CLOCK4
    input4 = _CLOCK2
    offset = _GROUP_4_CLOCKDIV_SAMPLED
    output1 = _GROUP_4_CLOCK

[copy]
    input = _GROUP_4_MOTO_A_CV
    output = _GROUP_4_CV

[copy]
    input = _GROUP_4_MOTO_A_GATE
    output = _GROUP_4_INTERNAL_GATE

[logic]
    input1 = _GROUP_4_INTERNAL_GATE
    input2 = _GROUP_4_ENABLE
    and = _GROUP_4_GATE

[logic]
    input1 = _GROUP_4_MOTO_A_LOAD
    input2 = _GLOBAL_LOAD_DELAY
    or = _GROUP_4_MOTO_A_LOAD_GLOBAL

[compare]
    input = _SEQUENCER_GROUP_SELECT
    compare = _SEQUENCER_GROUP_4
    ifequal = 1
    else = 0
    output = _GROUP_4_MOTO_A_ACTIVE

# #### Moto A
[motoquencer]
    clock = _GROUP_4_CLOCK
    reset = _STOP
    select = _SEQUENCER_GROUP_SELECT
    selectat = _SEQUENCER_GROUP_4
    fadermode = _PAGE_SELECT
    buttonmode = _BUTTONMODE
    copymode = 1 # only the current page
    startstep = 1
    endstep = 16 # default to 16 step sequence after a clear
    defaultgate = 0 # No gates after a clear
    cvbase = _GROUP_4_CV_BASE
    cvrange = _GROUP_4_CV_RANGE
    form = _GROUP_4_FORM
    pattern = _GROUP_4_PATTERN
    savepreset = _GROUP_4_MOTO_A_SAVE
    loadpreset = _GROUP_4_MOTO_A_LOAD_GLOBAL
    preset = _GROUP_4_MOTO_A_PRESET
    numfaders = 16
    numsteps = 32
    cv = _GROUP_4_MOTO_A_CV
    gate = _GROUP_4_MOTO_A_GATE
    clear = _CLEAR * _GROUP_4_MOTO_A_ACTIVE
    page = _GROUP_4_SHOW_PAGE
    currentpage = _GROUP_4_MOTO_A_PAGE